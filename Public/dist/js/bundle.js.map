{"version":3,"sources":["app.js","Controllers/detailsCtrl.js","Controllers/formsCtrl.js","Controllers/listAllCtrl.js","Controllers/mainCtrl.js","Controllers/searchCtrl.js","Controllers/userCtrl.js","Directives/cardflow.js","Directives/fileread.js","Directives/footerDir.js","Directives/headerDir.js","Directives/scrollSrv.js","Services/imagesService.js","Services/mainService.js","Services/userService.js"],"names":["angular","module","config","$stateProvider","$urlRouterProvider","$uiViewScrollProvider","state","url","templateUrl","controller","otherwise","useAnchorScroll","$scope","mainService","$stateParams","$location","scrollSrv","$rootScope","bid","parseInt","id","toFeatId","getAllBus","getBusData","then","response","i","length","b1","getSpecial","getSpecialData","s1","getMenu","getMenuData","m1","getMenuItemsData","res","items","j","menuid","menu_id","push","getGallery","getGalleryData","g1","editBusiness","selected","path","edit","isEditing","featureBus","featBus","featured","Materialize","toast","deleteBusiness","deleteBus","gotoElement","eID","hash","scrollTo","images","newGallery","newBus","addBus","bus_logo","spimg1","spimg2","bus_cover_img","spbg1","spbg2","gallery","user_id","currentUserId","addNewBus","business","updateBusiness","update","updateBus","resFromDb","stateType","type","typeTitle","busType","restaurants","coffeeCafe","bars","bakeries","desserts","takeouts","dataFromServer","getBusiness","searchAllBus","bus_type","searchBusiness","searchKey","searchKeyMain","allBusForSearch","userService","$state","getUser","user","first_name","currentUserEmail","email","isLoggedIn","isSignedIn","loginLocal","username","password","console","log","logout","setTransform","element","matrix","transform","t","window","getComputedStyle","prefix","forEach","p","m","match","map","e","Number","undefined","css","join","directive","$swipe","$timeout","link","scope","attrs","model","cardWidth","wrapperEl","find","containerEl","current","cards","mode","increment","setPositionX","position","$watch","cardEls","children","offsetLeft","offsetWidth","totalWidth","pageSize","Math","floor","clientWidth","removeClass","addClass","swipeLeft","swipeRight","transition","offset","velocity","timestamp","bind","start","coords","x","Date","now","end","elapsed","distance","abs","$apply","move","imageService","restrict","elem","changeEvent","reader","FileReader","onloadend","loadEvent","fileread","target","result","tempArray","value","split","fileName","storeImage","data","Location","catch","err","error","readAsDataURL","files","service","startY","currentYPosition","stopY","elmYPosition","speed","round","step","leapY","timer","setTimeout","self","pageYOffset","document","documentElement","scrollTop","body","elm","getElementById","y","offsetTop","node","offsetParent","factory","$http","imageData","imageExtension","newImage","imageName","imageBody","userEmail","post","baseUrl","method","updatedBus","feat","credentials"],"mappings":";;AAAAA,QAAQC,MAAR,CAAe,UAAf,EAA2B,CAAC,WAAD,EAAc,gBAAd,EAAgC,kBAAhC,CAA3B,EACEC,MADF,CACS,UAASC,cAAT,EAAyBC,kBAAzB,EAA6CC,qBAA7C,EAAmE;;AAE1EF,kBAEEG,KAFF,CAEQ,MAFR,EAEgB;AACdC,WAAK,GADS;AAEdC,mBAAa,oBAFC;AAGdC,kBAAY;AAHE,IAFhB,EAQEH,KARF,CAQQ,KARR,EAQe;AACbC,WAAK,YADQ;AAEbC,mBAAa,wBAFA;AAGbC,kBAAY;AAHC,IARf,EAcEH,KAdF,CAcQ,QAdR,EAckB;AAChBC,WAAK,SADW;AAEhBC,mBAAa,sBAFG;AAGhBC,kBAAY;AAHI,IAdlB,EAoBEH,KApBF,CAoBQ,GApBR,EAoBa;AACXC,WAAK,QADM;AAEXC,mBAAa,gCAFF;AAGXC,kBAAY;AAHD,IApBb,EA0BEH,KA1BF,CA0BQ,SA1BR,EA0BmB;AACjBC,WAAK,UADY;AAEjBC,mBAAa;AAFI,IA1BnB,EA+BEF,KA/BF,CA+BQ,OA/BR,EA+BiB;AACfC,WAAK,QADU;AAEfC,mBAAa;AAFE,IA/BjB,EAoCEF,KApCF,CAoCQ,SApCR,EAoCmB,EAAE;AACnBC,WAAK,UADY;AAEjBC,mBAAa,uBAFI;AAGjBC,kBAAY;AAHK,IApCnB;;AA0CCL,sBAAmBM,SAAnB,CAA6B,GAA7B;;AAEAL,yBAAsBM,eAAtB;AAED,CAjDF;;;ACAAX,QAAQC,MAAR,CAAe,UAAf,EAA2BQ,UAA3B,CAAsC,aAAtC,EAAqD,UAASG,MAAT,EAAiBC,WAAjB,EAA8BC,YAA9B,EAA4CC,SAA5C,EAAuDC,SAAvD,EAAkEC,UAAlE,EAA6E;;AAEjI,KAAIC,MAAMC,SAASL,aAAaM,EAAtB,CAAV;AACAR,QAAOS,QAAP,GAAkBH,GAAlB;;AAEA;AACAN,QAAOU,SAAP,GAAmB,YAAU;AAC5BT,cAAYU,UAAZ,GAAyBC,IAAzB,CAA8B,UAASC,QAAT,EAAkB;AAC/C;AACA,QAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAID,SAASE,MAA5B,EAAoCD,GAApC,EAAwC;AACvC,QAAGD,SAASC,CAAT,EAAYN,EAAZ,KAAmBF,GAAtB,EAA0B;AACzBN,YAAOgB,EAAP,GAAYH,SAASC,CAAT,CAAZ;AACA;AACD;AACD,GAPD;AAQA,EATD;;AAWAd,QAAOU,SAAP;;AAGA;AACAV,QAAOiB,UAAP,GAAoB,YAAU;AAC7BhB,cAAYiB,cAAZ,CAA2BZ,GAA3B,EAAgCM,IAAhC,CAAqC,UAASC,QAAT,EAAkB;AACtDb,UAAOmB,EAAP,GAAYN,QAAZ;AACA,GAFD;AAGA,EAJD;;AAMAb,QAAOiB,UAAP;;AAGA;AACAjB,QAAOoB,OAAP,GAAiB,YAAU;AAC1BnB,cAAYoB,WAAZ,CAAwBf,GAAxB,EAA6BM,IAA7B,CAAkC,UAASC,QAAT,EAAkB;AACnDb,UAAOsB,EAAP,GAAYT,QAAZ;AACAZ,eAAYsB,gBAAZ,CAA6BjB,GAA7B,EAAkCM,IAAlC,CAAuC,UAASY,GAAT,EAAa;AACnD,QAAIC,QAAQD,GAAZ;AACA,SAAI,IAAIV,IAAI,CAAZ,EAAeA,IAAId,OAAOsB,EAAP,CAAUP,MAA7B,EAAqCD,GAArC,EAAyC;AACxCd,YAAOsB,EAAP,CAAUR,CAAV,EAAaW,KAAb,GAAqB,EAArB;AACA,UAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAID,MAAMV,MAAzB,EAAiCW,GAAjC,EAAqC;AACpC,UAAGD,MAAMC,CAAN,EAASC,MAAT,KAAoB3B,OAAOsB,EAAP,CAAUR,CAAV,EAAac,OAApC,EAA4C;AAC3C5B,cAAOsB,EAAP,CAAUR,CAAV,EAAaW,KAAb,CAAmBI,IAAnB,CAAwBJ,MAAMC,CAAN,CAAxB;AACA;AACD;AACD;AACD,IAVD;AAWA,GAbD;AAcA,EAfD;;AAiBA1B,QAAOoB,OAAP;;AAGA;AACApB,QAAO8B,UAAP,GAAoB,YAAU;AAC7B7B,cAAY8B,cAAZ,CAA2BzB,GAA3B,EAAgCM,IAAhC,CAAqC,UAASC,QAAT,EAAkB;AACtDb,UAAOgC,EAAP,GAAYnB,QAAZ;AACA,GAFD;AAGA,EAJD;;AAMAb,QAAO8B,UAAP;;AAGA;AACA9B,QAAOiC,YAAP,GAAsB,UAASjB,EAAT,EAAY;AACjCf,cAAYiC,QAAZ,GAAuBlB,EAAvB;AACAb,YAAUgC,IAAV,CAAe,UAAf;AACA,EAHD;;AAKA;AACAnC,QAAOoC,IAAP,GAAc,YAAU;AACvB/B,aAAWgC,SAAX,GAAuB,IAAvB;AACA,EAFD;;AAKA;AACArC,QAAOsC,UAAP,GAAoB,UAASC,OAAT,EAAiB;AACpCtC,cAAYqC,UAAZ,CAAuBC,OAAvB,EAAgC3B,IAAhC,CAAqC,UAASC,QAAT,EAAkB;AACtD,OAAGA,SAAS,CAAT,EAAY2B,QAAZ,KAAyB,KAA5B,EAAkC;AACjCC,gBAAYC,KAAZ,CAAkB,gCAAlB,EAAoD,IAApD,EAA0D,OAA1D;AACA;AACD,OAAG7B,SAAS,CAAT,EAAY2B,QAAZ,KAAyB,IAA5B,EAAiC;AAChCC,gBAAYC,KAAZ,CAAkB,sCAAlB,EAA0D,IAA1D,EAAgE,KAAhE;AACA;AACDvC,aAAUgC,IAAV,CAAe,GAAf;AACA,GARD;AASA,EAVD;;AAaA;AACAnC,QAAO2C,cAAP,GAAwB,UAASnC,EAAT,EAAY;AACnCP,cAAY2C,SAAZ,CAAsBpC,EAAtB,EAA0BI,IAA1B,CAA+B,UAASC,QAAT,EAAkB;AAChDV,aAAUgC,IAAV,CAAe,GAAf;AACA,GAFD;AAGA,EAJD;;AAMA;AACCnC,QAAO6C,WAAP,GAAqB,UAAUC,GAAV,EAAc;AAClC3C,YAAU4C,IAAV,CAAeD,GAAf;AACA1C,YAAU4C,QAAV,CAAmBF,GAAnB;AACA,EAHD;AAKD,CApGD;;;ACAA1D,QAAQC,MAAR,CAAe,UAAf,EAA2BQ,UAA3B,CAAsC,WAAtC,EAAmD,UAASG,MAAT,EAAiBC,WAAjB,EAA8BE,SAA9B,EAAyCE,UAAzC,EAAoD;;AAEtGL,QAAOiD,MAAP,GAAgB,EAAhB;AACAjD,QAAOkD,UAAP,GAAoB,EAApB;AACAlD,QAAOmD,MAAP,GAAgBlD,YAAYiC,QAA5B;;AAEAlC,QAAOoD,MAAP,GAAgB,UAASD,MAAT,EAAgB;AAC/B;AACAA,SAAOE,QAAP,GAAkBrD,OAAOiD,MAAP,CAAc,CAAd,CAAlB;AACAE,SAAOG,MAAP,GAAgBtD,OAAOiD,MAAP,CAAc,CAAd,CAAhB;AACAE,SAAOI,MAAP,GAAgBvD,OAAOiD,MAAP,CAAc,CAAd,CAAhB;AACAE,SAAOK,aAAP,GAAuBxD,OAAOiD,MAAP,CAAc,CAAd,CAAvB;AACAE,SAAOM,KAAP,GAAezD,OAAOiD,MAAP,CAAc,CAAd,CAAf;AACAE,SAAOO,KAAP,GAAe1D,OAAOiD,MAAP,CAAc,CAAd,CAAf;;AAEA,OAAK,IAAInC,IAAI,CAAb,EAAgBA,IAAId,OAAOiD,MAAP,CAAclC,MAAlC,EAA0CD,GAA1C,EAA+C;AAC9Cd,UAAOkD,UAAP,CAAkBrB,IAAlB,CAAuB7B,OAAOiD,MAAP,CAAcnC,CAAd,CAAvB;AACA;;AAEDqC,SAAOQ,OAAP,GAAiB3D,OAAOkD,UAAxB;AACAC,SAAOS,OAAP,GAAiBvD,WAAWwD,aAA5B;;AAEA5D,cAAY6D,SAAZ,CAAsBX,MAAtB,EAA8BvC,IAA9B,CAAmC,UAASC,QAAT,EAAkB;AACpDb,UAAO+D,QAAP,GAAkBlD,QAAlB;AACA,GAFD;AAGA,EAnBD;;AAsBA;;AAEAb,QAAOgE,cAAP,GAAwB,UAASC,MAAT,EAAgB;AACvChE,cAAYiE,SAAZ,CAAsBD,MAAtB,EAA8BrD,IAA9B,CAAmC,UAASC,QAAT,EAAkB;AACpDb,UAAOmE,SAAP,GAAmBtD,QAAnB;AACA;AACA,GAHD;AAIA,EALD;AAOA,CArCD;;;ACAAzB,QAAQC,MAAR,CAAe,UAAf,EAA2BQ,UAA3B,CAAsC,aAAtC,EAAqD,UAASG,MAAT,EAAiBE,YAAjB,EAA+BG,UAA/B,EAA0C;;AAE9F,KAAI+D,YAAYlE,aAAamE,IAA7B;;AAEArE,QAAOsE,SAAP,GAAmBF,SAAnB;AACApE,QAAOuE,OAAP,GAAiB,EAAjB;;AAEA,KAAGH,cAAc,UAAjB,EAA4B;AAC3BpE,SAAOuE,OAAP,GAAiBlE,WAAWmC,QAA5B;AACA;AACD,KAAG4B,cAAc,aAAjB,EAA+B;AAC9BpE,SAAOuE,OAAP,GAAiBlE,WAAWmE,WAA5B;AACA;AACD,KAAGJ,cAAc,aAAjB,EAA+B;AAC9BpE,SAAOuE,OAAP,GAAiBlE,WAAWoE,UAA5B;AACA;AACD,KAAGL,cAAc,MAAjB,EAAwB;AACvBpE,SAAOuE,OAAP,GAAiBlE,WAAWqE,IAA5B;AACA;AACD,KAAGN,cAAc,QAAjB,EAA0B;AACzBpE,SAAOuE,OAAP,GAAiBlE,WAAWsE,QAA5B;AACA;AACD,KAAGP,cAAc,SAAjB,EAA2B;AAC1BpE,SAAOuE,OAAP,GAAiBlE,WAAWuE,QAA5B;AACA;AACD,KAAGR,cAAc,uBAAjB,EAAyC;AACxCpE,SAAOuE,OAAP,GAAiBlE,WAAWwE,QAA5B;AACA;AAGD,CA9BD;;;ACAAzF,QAAQC,MAAR,CAAe,UAAf,EAA2BQ,UAA3B,CAAsC,UAAtC,EAAkD,UAASG,MAAT,EAAiBC,WAAjB,EAA8BI,UAA9B,EAAyC;;AAE1FL,QAAO8E,cAAP,GAAwB,KAAxB;;AAEAzE,YAAWmC,QAAX,GAAsB,EAAtB;AACAnC,YAAWmE,WAAX,GAAyB,EAAzB;AACAnE,YAAWoE,UAAX,GAAwB,EAAxB;AACApE,YAAWqE,IAAX,GAAkB,EAAlB;AACArE,YAAWsE,QAAX,GAAsB,EAAtB;AACAtE,YAAWuE,QAAX,GAAsB,EAAtB;AACAvE,YAAWwE,QAAX,GAAsB,EAAtB;;AAEA7E,QAAO+E,WAAP,GAAqB,YAAU;AAC9B9E,cAAYU,UAAZ,GAAyBC,IAAzB,CAA8B,UAASC,QAAT,EAAkB;AAC/C;AACAR,cAAW2E,YAAX,GAA0BnE,QAA1B;;AAEA,QAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAID,SAASE,MAA7B,EAAqCD,GAArC,EAAyC;AACxC,QAAGD,SAASC,CAAT,EAAY0B,QAAZ,KAAyB,KAA5B,EAAkC;AACjCnC,gBAAWmC,QAAX,CAAoBX,IAApB,CAAyBhB,SAASC,CAAT,CAAzB;AACA;AACD;;AAED,QAAI,IAAIY,IAAI,CAAZ,EAAeA,IAAIb,SAASE,MAA5B,EAAoCW,GAApC,EAAwC;AACvC,QAAGb,SAASa,CAAT,EAAYuD,QAAZ,KAAyB,YAA5B,EAAyC;AACxC5E,gBAAWmE,WAAX,CAAuB3C,IAAvB,CAA4BhB,SAASa,CAAT,CAA5B;AACA;AACD,QAAGb,SAASa,CAAT,EAAYuD,QAAZ,KAAyB,eAA5B,EAA4C;AAC3C5E,gBAAWoE,UAAX,CAAsB5C,IAAtB,CAA2BhB,SAASa,CAAT,CAA3B;AACA;AACD,QAAGb,SAASa,CAAT,EAAYuD,QAAZ,KAAyB,KAA5B,EAAkC;AACjC5E,gBAAWqE,IAAX,CAAgB7C,IAAhB,CAAqBhB,SAASa,CAAT,CAArB;AACA;AACD,QAAGb,SAASa,CAAT,EAAYuD,QAAZ,KAAyB,QAA5B,EAAqC;AACpC5E,gBAAWsE,QAAX,CAAoB9C,IAApB,CAAyBhB,SAASa,CAAT,CAAzB;AACA;AACD,QAAGb,SAASa,CAAT,EAAYuD,QAAZ,KAAyB,SAA5B,EAAsC;AACrC5E,gBAAWuE,QAAX,CAAoB/C,IAApB,CAAyBhB,SAASa,CAAT,CAAzB;AACA;AACD,QAAGb,SAASa,CAAT,EAAYuD,QAAZ,KAAyB,yBAA5B,EAAsD;AACrD5E,gBAAWwE,QAAX,CAAoBhD,IAApB,CAAyBhB,SAASa,CAAT,CAAzB;AACA;AACD;AACD1B,UAAO8E,cAAP,GAAwB,IAAxB;AACA,GA/BD;AAgCA,EAjCD;;AAmCA9E,QAAO+E,WAAP;;AAEA/E,QAAOkF,cAAP,GAAwB,UAASC,SAAT,EAAmB;AAC1C9E,aAAW+E,aAAX,GAA2BD,SAA3B;AACA,EAFD;AAIA,CArDD;;;ACAA/F,QAAQC,MAAR,CAAe,UAAf,EAA2BQ,UAA3B,CAAsC,YAAtC,EAAoD,UAASG,MAAT,EAAiBK,UAAjB,EAA4B;;AAE/EL,QAAOqF,eAAP,GAAyBhF,WAAW2E,YAApC;AAEA,CAJD;;;ACAA5F,QAAQC,MAAR,CAAe,UAAf,EAA2BQ,UAA3B,CAAsC,UAAtC,EAAkD,UAASG,MAAT,EAAiBsF,WAAjB,EAA8BC,MAA9B,EAAsClF,UAAtC,EAAkDF,SAAlD,EAA4D;;AAE5G,WAASqF,OAAT,GAAmB;AACjBF,gBAAYE,OAAZ,GAAsB5E,IAAtB,CAA2B,UAAS6E,IAAT,EAAe;AACxC,UAAGA,IAAH,EAAQ;AACNzF,eAAOyF,IAAP,GAAcA,KAAKC,UAAnB;AACArF,mBAAWwD,aAAX,GAA2B4B,KAAKjF,EAAhC;AACAH,mBAAWsF,gBAAX,GAA8BF,KAAKG,KAAnC;AACAvF,mBAAWwF,UAAX,GAAwB,IAAxB;AACD,OALD,MAKO;AACL7F,eAAOyF,IAAP,GAAc,SAAd;AACApF,mBAAWwF,UAAX,GAAwB,KAAxB;AACD;AACF,KAVD;AAWD;;AAEDL;;AAEAnF,aAAWyF,UAAX,GAAwB,YAAU;AAChC,QAAGzF,WAAWwF,UAAd,EAAyB;AACvB1F,gBAAUgC,IAAV,CAAe,SAAf;AACD,KAFD,MAEO;AACLM,kBAAYC,KAAZ,CAAkB,uBAAlB,EAA2C,IAA3C,EAAiD,KAAjD;AACD;AACF,GAND;;AAQA1C,SAAO+F,UAAP,GAAoB,UAASC,QAAT,EAAmBC,QAAnB,EAA6B;AAC/CC,YAAQC,GAAR,CAAY,iBAAZ,EAA+BH,QAA/B,EAAyCC,QAAzC;AACAX,gBAAYS,UAAZ,CAAuB;AACrBC,gBAAUA,QADW;AAErBC,gBAAUA;AAFW,KAAvB,EAICrF,IAJD,CAIM,UAASY,GAAT,EAAc;AAClBgE;AACD,KAND;AAOD,GATD;;AAWAxF,SAAOoG,MAAP,GAAgBd,YAAYc,MAA5B;AAED,CAvCD;ACAA;;AAEA,CAAC,YAAU;AACP;AACA;AACA,QAAIC,eAAe,SAAfA,YAAe,CAASC,OAAT,EAAkBC,MAAlB,EAAyB;AACxC,YAAIC,SAAJ;AACA,YAAIC,IAAIC,OAAOC,gBAAP,CAAwBL,OAAxB,CAAR;AACA,YAAIM,MAAJ;AACA,YAAIH,CAAJ,EAAM;AACFrH,oBAAQyH,OAAR,CAAgB,CAAC,KAAD,EAAO,GAAP,EAAW,QAAX,CAAhB,EAAsC,UAASC,CAAT,EAAW;AAC7C,oBAAIL,EAAEK,IAAI,WAAN,CAAJ,EAAuB;AACnBN,gCAAYC,EAAEK,IAAI,WAAN,CAAZ;AACAF,6BAAOE,CAAP;AACH;AACJ,aALD;;AAOA,gBAAIN,SAAJ,EAAc;AACV,oBAAIO,IAAIP,UAAUQ,KAAV,CAAgB,MAAhB,CAAR;AACA,oBAAID,KAAKA,EAAEhG,MAAF,IAAY,CAArB,EAAuB;AACnBgG,wBAAIA,EAAEE,GAAF,CAAM,UAASC,CAAT,EAAW;AAAE,+BAAOC,OAAOD,CAAP,CAAP;AAAmB,qBAAtC,CAAJ;AACH,iBAFD,MAEK;AACDH,wBAAI,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,EAAO,CAAP,EAAS,CAAT,EAAW,CAAX,CAAJ;AACH;AACJ,aAPD,MAOK;AACAA,oBAAI,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,EAAO,CAAP,EAAS,CAAT,EAAW,CAAX,CAAJ;AACJ;;AAED,iBAAI,IAAIjG,IAAE,CAAV,EAAaA,IAAE,CAAf,EAAiBA,GAAjB,EAAqB;AACjB,oBAAIyF,OAAOzF,CAAP,MAAcsG,SAAlB,EAA4B;AACxBL,sBAAEjG,CAAF,IAAOyF,OAAOzF,CAAP,CAAP;AACH;AACJ;AACD,gBAAIuG,MAAK,EAAT;AACA,gBAAI,CAACT,MAAL,EAAY;AACRS,oBAAI,WAAJ,IAAmB,YAAYN,EAAEO,IAAF,CAAO,GAAP,CAAZ,GAA0B,GAA7C;AACH,aAFD,MAEK;AACDD,oBAAIT,SAAS,WAAb,IAA0B,YAAYG,EAAEO,IAAF,CAAO,GAAP,CAAZ,GAA0B,GAApD;AACH;AACDlI,oBAAQkH,OAAR,CAAgBA,OAAhB,EAAyBe,GAAzB,CAA6BA,GAA7B;AACH;AACJ,KApCD;;AAsCA,QAAIhI,SAASD,QAAQC,MAAR,CAAe,kBAAf,EAAmC,CAAC,SAAD,CAAnC,CAAb;;AAEAA,WAAOkI,SAAP,CAAiB,UAAjB,EAA6B,CAAC,QAAD,EAAW,UAAX,EAAuB,UAASC,MAAT,EAAiBC,QAAjB,EAA2B;AAC3E,eAAO;AACH,wBAAY,GADT;AAEH,wBAAY,gKAFT;AAGH,0BAAc,IAHX;AAIH,qBAAS,EAAE,SAAU,IAAZ,EAAkB,QAAO,IAAzB,EAA+B,WAAU,IAAzC,EAJN;AAKHC,kBAAM,cAASC,KAAT,EAAgBrB,OAAhB,EAAyBsB,KAAzB,EAA+B;AACjC;AACAH,yBAAS,YAAU;AACfE,0BAAME,KAAN,GAAcF,MAAME,KAAN,IAAe,EAA7B;AACAF,0BAAME,KAAN,CAAYC,SAAZ,GAAwB,CAAxB;AACAH,0BAAME,KAAN,CAAYE,SAAZ,GAAsB3I,QAAQkH,OAAR,CAAgBA,QAAQ0B,IAAR,CAAa,KAAb,EAAoB,CAApB,CAAhB,CAAtB;AACAL,0BAAME,KAAN,CAAYI,WAAZ,GAAwB7I,QAAQkH,OAAR,CAAgBqB,MAAME,KAAN,CAAYE,SAAZ,CAAsBC,IAAtB,CAA2B,KAA3B,EAAkC,CAAlC,CAAhB,CAAxB;AACAL,0BAAME,KAAN,CAAYK,OAAZ,GAAsBP,MAAMO,OAAN,IAAiBP,MAAME,KAAN,CAAYK,OAA7B,IAAwC,CAA9D;AACAP,0BAAME,KAAN,CAAYM,KAAZ,GAAoBR,MAAME,KAAN,CAAYM,KAAZ,IAAqB,EAAzC;AACAR,0BAAMS,IAAN,GAAaR,MAAMQ,IAAN,IAAc,kBAA3B;AACAT,0BAAME,KAAN,CAAYQ,SAAZ,GAAsB,CAAtB;;AAEA;AACA,6BAASC,YAAT,CAAsBC,QAAtB,EAA+B;AAC3BlC,qCAAasB,MAAME,KAAN,CAAYI,WAAZ,CAAwB,CAAxB,CAAb,EAAyC,CAACb,SAAD,EAAYA,SAAZ,EAAuBA,SAAvB,EAAkCA,SAAlC,EAA6CmB,QAA7C,EAAuDnB,SAAvD,CAAzC;AACH;;AAEDO,0BAAME,KAAN,CAAYS,YAAZ,GAA2BA,YAA3B;;AAEA;AACAX,0BAAMa,MAAN,CAAa,YAAW;AAAE,+BAAOb,MAAME,KAAN,CAAYM,KAAnB;AAA2B,qBAArD,EAAuD,YAAU;AAC7DR,8BAAME,KAAN,CAAYY,OAAZ,GAAsBd,MAAME,KAAN,CAAYI,WAAZ,CAAwBS,QAAxB,EAAtB;AACA,4BAAIf,MAAME,KAAN,CAAYY,OAAZ,IAAuBd,MAAME,KAAN,CAAYY,OAAZ,CAAoB,CAApB,CAA3B,EAAkD;AAC9Cd,kCAAME,KAAN,CAAYC,SAAZ,GAAwBH,MAAME,KAAN,CAAYY,OAAZ,CAAoB,CAApB,EAAuBE,UAAvB,GAAkChB,MAAME,KAAN,CAAYY,OAAZ,CAAoB,CAApB,EAAuBE,UAAjF;;AAEA,gCAAIhB,MAAME,KAAN,CAAYC,SAAZ,KAA0B,CAA9B,EAAgC;AAC5BH,sCAAME,KAAN,CAAYC,SAAZ,GAAwBH,MAAME,KAAN,CAAYY,OAAZ,CAAoB,CAApB,EAAuBG,WAA/C;AACH;;AAED,gCAAIC,aAAclB,MAAME,KAAN,CAAYC,SAAZ,GAAsBH,MAAME,KAAN,CAAYY,OAAZ,CAAoB1H,MAA3C,GAAqD4G,MAAME,KAAN,CAAYY,OAAZ,CAAoB,CAApB,EAAuBE,UAA7F;AACA;AACAhB,kCAAME,KAAN,CAAYI,WAAZ,CAAwBZ,GAAxB,CAA4B,EAAC,SAASwB,aAAa,IAAvB,EAA5B;;AAEAlB,kCAAME,KAAN,CAAYiB,QAAZ,GAAuBC,KAAKC,KAAL,CAAWrB,MAAME,KAAN,CAAYE,SAAZ,CAAsB,CAAtB,EAAyBkB,WAAzB,GAAuCtB,MAAME,KAAN,CAAYC,SAA9D,CAAvB;AACAH,kCAAME,KAAN,CAAYQ,SAAZ,GAAyBV,MAAMS,IAAN,IAAc,cAAf,GAAiC,CAAjC,GAAqCT,MAAME,KAAN,CAAYiB,QAAzE;AACH;AACJ,qBAhBD;;AAkBA,wBAAKnB,MAAMS,IAAN,IAAc,OAAnB,EAA2B;AACvBT,8BAAMa,MAAN,CAAa,YAAW;AAAE,mCAAOb,MAAME,KAAN,CAAYK,OAAnB;AAA6B,yBAAvD,EAAyD,YAAU;AAC/D,gCAAIP,MAAME,KAAN,CAAYY,OAAhB,EAAwB;AACpBd,sCAAME,KAAN,CAAYY,OAAZ,CAAoBS,WAApB,CAAgC,iBAAhC;AACA,oCAAIhB,UAAU9I,QAAQkH,OAAR,CAAgBqB,MAAME,KAAN,CAAYY,OAAZ,CAAoBd,MAAME,KAAN,CAAYK,OAAhC,CAAhB,CAAd;AACAA,wCAAQiB,QAAR,CAAiB,iBAAjB;AACA,oCAAIxB,MAAME,KAAN,CAAYC,SAAhB,EAA0B;AACtBQ,iDAAcX,MAAME,KAAN,CAAYC,SAAZ,GAAwB,CAACH,MAAME,KAAN,CAAYK,OAAnD;AACH;AACJ;AACJ,yBATD;AAUH;;AAED,wBAAIP,MAAMS,IAAN,IAAc,cAAd,IAAgCT,MAAMS,IAAN,IAAc,eAAlD,EAAkE;AAC9DT,8BAAMyB,SAAN,GAAkB,YAAU;AACxB,gCAAIlB,UAAUP,MAAME,KAAN,CAAYK,OAAZ,GAAoBP,MAAME,KAAN,CAAYQ,SAA9C;AACA,gCAAIH,UAAUP,MAAME,KAAN,CAAYY,OAAZ,CAAoB1H,MAAlC,EAAyC;AACrC4G,sCAAME,KAAN,CAAYK,OAAZ,GAAsBA,OAAtB;AACH;AACJ,yBALD;AAMAP,8BAAM0B,UAAN,GAAmB,YAAU;AACzB,gCAAInB,UAAUP,MAAME,KAAN,CAAYK,OAAZ,GAAoBP,MAAME,KAAN,CAAYQ,SAA9C;AACA,gCAAIH,WAAW,CAAf,EAAiB;AACbP,sCAAME,KAAN,CAAYK,OAAZ,GAAsBA,OAAtB;AACH;AACJ,yBALD;AAMH;;AAED,wBAAIP,MAAMS,IAAN,IAAc,WAAd,IAA6BT,MAAMS,IAAN,IAAc,kBAA3C,IAAkET,MAAMS,IAAN,IAAc,OAApF,EAA4F;;AAExF;AACA,4BAAIkB,aAAW,EAAf;AACA,4BAAI7C,IAAIC,OAAOC,gBAAP,CAAwBgB,MAAME,KAAN,CAAYI,WAAZ,CAAwB,CAAxB,CAAxB,EAAoD,YAApD,CAAR;AACA,4BAAIxB,CAAJ,EAAM;AACF6C,uCAAWA,UAAX,GAAwB7C,IAAI,EAA5B;AACH;AACDrH,gCAAQyH,OAAR,CAAgB,CAAC,KAAD,EAAO,GAAP,EAAW,QAAX,EAAoB,IAApB,CAAhB,EAA2C,UAASC,CAAT,EAAW;AAClDL,gCAAIC,OAAOC,gBAAP,CAAwBgB,MAAME,KAAN,CAAYI,WAAZ,CAAwB,CAAxB,CAAxB,EAAoDnB,IAAE,YAAtD,CAAJ;AACA,gCAAIL,CAAJ,EAAM;AACF6C,2CAAWxC,IAAE,YAAb,IAA6BL,CAA7B;AACH;AACJ,yBALD;;AAOA,4BAAI8C,SAAS,CAAb;AAAA,4BAAgBhB,WAAS,CAAzB;AAAA,4BAA4BiB,WAAS,CAArC;AAAA,4BAAwCC,SAAxC;;AAEAjC,+BAAOkC,IAAP,CAAY/B,MAAME,KAAN,CAAYE,SAAxB,EAAmC;AAC/B4B,mCAAO,eAASC,MAAT,EAAgB;AACnBjC,sCAAME,KAAN,CAAYY,OAAZ,CAAoBS,WAApB,CAAgC,iBAAhC;AACAK,yCAAU5B,MAAMS,IAAN,IAAc,OAAf,GAA0BwB,OAAOC,CAAP,GAAStB,QAAnC,GAA8CqB,OAAOC,CAA9D;;AAEA;AACAzK,wCAAQyH,OAAR,CAAgB,CAAC,KAAD,EAAO,GAAP,EAAW,QAAX,EAAoB,IAApB,CAAhB,EAA2C,UAASC,CAAT,EAAW;AAClDa,0CAAME,KAAN,CAAYI,WAAZ,CAAwBZ,GAAxB,CAA4BP,IAAE,YAA9B,EAA4C,MAA5C;AACH,iCAFD;AAGAa,sCAAME,KAAN,CAAYI,WAAZ,CAAwBZ,GAAxB,CAA4B,EAAC,cAAa,MAAd,EAA5B;;AAEA,oCAAIM,MAAMS,IAAN,IAAc,kBAAlB,EAAqC;AACjCoB,+CAAW,CAAX;AACAC,gDAAYK,KAAKC,GAAL,EAAZ;AACH;AACJ,6BAf8B;AAgB/BC,iCAAK,aAASJ,MAAT,EAAgB;AACjB;AACAjC,sCAAME,KAAN,CAAYI,WAAZ,CAAwBZ,GAAxB,CAA4BiC,UAA5B;;AAEA,oCAAK3B,MAAMS,IAAN,IAAc,OAAnB,EAA2B;AACvB;AACA,wCAAIF,UAAUa,KAAKC,KAAL,CAAYT,WAAS,CAACZ,MAAME,KAAN,CAAYC,SAAvB,GAAoC,GAA/C,CAAd;;AAEA,wCAAIH,MAAMS,IAAN,IAAc,kBAAlB,EAAqC;AACjC;AACA,4CAAI2B,MAAMD,KAAKC,GAAL,EAAV;AACA,4CAAIE,UAAUF,MAAIN,SAAlB;AACA,4CAAIS,WAAWX,SAAOK,OAAOC,CAA7B;AACA,4CAAIL,WAAWU,WAASD,OAAxB;;AAEA,4CAAIlB,KAAKoB,GAAL,CAASX,QAAT,IAAqB,CAAzB,EAA2B;AACvBtB,sDAAUa,KAAKC,KAAL,CAAWd,UAAUsB,QAArB,CAAV;AACH;AAEJ;;AAED,wCAAItB,WAAU,CAAd,EAAgB;AACZ,4CAAIA,UAAWP,MAAME,KAAN,CAAYY,OAAZ,CAAoB1H,MAApB,GAA2B,CAA1C,EAA6C;AACzCmH,sDAAUP,MAAME,KAAN,CAAYY,OAAZ,CAAoB1H,MAApB,GAA2B,CAArC;AACH;AACJ,qCAJD,MAIK;AACDmH,kDAAU,CAAV;AACH;;AAED;AACA,wCAAIP,MAAME,KAAN,CAAYK,OAAZ,IAAqBA,OAAzB,EAAiC;AAC7BP,8CAAME,KAAN,CAAYK,OAAZ,GAAoB,CAAC,CAArB;AACAP,8CAAMyC,MAAN;AACH;AACDzC,0CAAME,KAAN,CAAYK,OAAZ,GAAoBA,OAApB;AACAP,0CAAMyC,MAAN;AACH;AACJ,6BArD8B;AAsD/BC,kCAAM,cAAST,MAAT,EAAgB;AAClB;AACA,oCAAIjC,MAAMS,IAAN,IAAc,OAAlB,EAA0B;AACtBG,+CAAWqB,OAAOC,CAAP,GAAYlC,MAAME,KAAN,CAAYK,OAAZ,GAAoBP,MAAME,KAAN,CAAYC,SAA5C,GAAyDyB,MAApE;AACH,iCAFD,MAEK;AACDhB,+CAAWqB,OAAOC,CAAP,GAAWN,MAAtB;AACH;;AAEDjB,6CAAaC,QAAb;AACH;AA/D8B,yBAAnC;AAiEH;AAEJ,iBApJD;AAqJH;AA5JE,SAAP;AA8JH,KA/J4B,CAA7B;AAkKH,CA7MD;;;ACFAnJ,QAAQC,MAAR,CAAe,UAAf,EAA2BkI,SAA3B,CAAqC,UAArC,EAAiD,UAAU+C,YAAV,EAAwB;AACvE,SAAO;AACLC,cAAU,GADL;AAEL7C,UAAM,cAAUC,KAAV,EAAiB6C,IAAjB,EAAuB5C,KAAvB,EAA8B;AAClC4C,WAAKd,IAAL,CAAU,QAAV,EAAoB,UAAUe,WAAV,EAAuB;AACzC,YAAIC,SAAS,IAAIC,UAAJ,EAAb;;AAEAD,eAAOE,SAAP,GAAmB,UAAUC,SAAV,EAAqB;AACtC;AACA,cAAIC,WAAWD,UAAUE,MAAV,CAAiBC,MAAhC;AACA;;AAEA;AACA,cAAIC,YAAYT,KAAK,CAAL,EAAQU,KAAR,CAAcC,KAAd,CAAoB,IAApB,CAAhB;AACA,cAAIC,WAAWH,UAAUA,UAAUlK,MAAV,GAAmB,CAA7B,CAAf;;AAEAuJ,uBAAae,UAAb,CAAwBP,QAAxB,EAAkCM,QAAlC,EACCxK,IADD,CACM,UAAUoK,MAAV,EAAkB;AACtB;AACArD,kBAAM1E,MAAN,CAAapB,IAAb,CAAkBmJ,OAAOM,IAAP,CAAYC,QAA9B;AACA;AACD,WALD,EAMCC,KAND,CAMO,UAAUC,GAAV,EAAe;AACpBvF,oBAAQwF,KAAR,CAAcD,GAAd;AACD,WARD;AASD,SAlBD;;AAoBAf,eAAOiB,aAAP,CAAqBlB,YAAYM,MAAZ,CAAmBa,KAAnB,CAAyB,CAAzB,CAArB;AACD,OAxBD;AAyBD;AA5BI,GAAP;AA8BD,CA/BD;;;ACAAxM,QAAQC,MAAR,CAAe,UAAf,EAA2BkI,SAA3B,CAAqC,WAArC,EAAkD,YAAU;;AAE3D,QAAO;AACNgD,YAAU,GADJ;AAEN3K,eAAa;AAFP,EAAP;AAKA,CAPD;;;ACAAR,QAAQC,MAAR,CAAe,UAAf,EAA2BkI,SAA3B,CAAqC,WAArC,EAAkD,YAAU;;AAE3D,QAAO;AACNgD,YAAU,GADJ;AAEN3K,eAAa,yBAFP;AAGNC,cAAY;AAHN,EAAP;AAMA,CARD;;;ACAA,IAAIG,MAAJ,EAAYG,SAAZ;;AAEAf,QAAQC,MAAR,CAAe,UAAf,EAA2BwM,OAA3B,CAAmC,WAAnC,EAAgD,YAAU;;AAEtD,SAAK7I,QAAL,GAAgB,UAASF,GAAT,EAAc;;AAE1B,YAAIgJ,SAASC,kBAAb;AACA,YAAIC,QAAQC,aAAanJ,GAAb,CAAZ;AACA,YAAIoH,WAAW8B,QAAQF,MAAR,GAAiBE,QAAQF,MAAzB,GAAkCA,SAASE,KAA1D;AACA,YAAI9B,WAAW,GAAf,EAAoB;AAChBlH,qBAAS,CAAT,EAAYgJ,KAAZ,EAAoB;AACvB;AACD,YAAIE,QAAQnD,KAAKoD,KAAL,CAAWjC,WAAW,GAAtB,CAAZ;AACA,YAAIgC,SAAS,EAAb,EAAiBA,QAAQ,EAAR;AACjB,YAAIE,OAAOrD,KAAKoD,KAAL,CAAWjC,WAAW,EAAtB,CAAX;AACA,YAAImC,QAAQL,QAAQF,MAAR,GAAiBA,SAASM,IAA1B,GAAiCN,SAASM,IAAtD;AACA,YAAIE,QAAQ,CAAZ;AACA,YAAIN,QAAQF,MAAZ,EAAoB;AAChB,iBAAM,IAAIhL,IAAEgL,MAAZ,EAAoBhL,IAAEkL,KAAtB,EAA6BlL,KAAGsL,IAAhC,EAAuC;AACnCG,2BAAW,wBAAsBF,KAAtB,GAA4B,GAAvC,EAA4CC,QAAQJ,KAApD;AACAG,yBAASD,IAAT,CAAe,IAAIC,QAAQL,KAAZ,EAAmBK,QAAQL,KAAR,CAAeM;AACpD,aAAC;AACL;AACD,aAAM,IAAIxL,IAAEgL,MAAZ,EAAoBhL,IAAEkL,KAAtB,EAA6BlL,KAAGsL,IAAhC,EAAuC;AACnCG,uBAAW,wBAAsBF,KAAtB,GAA4B,GAAvC,EAA4CC,QAAQJ,KAApD;AACAG,qBAASD,IAAT,CAAe,IAAIC,QAAQL,KAAZ,EAAmBK,QAAQL,KAAR,CAAeM;AACpD;;AAED,iBAASP,gBAAT,GAA4B;AACxB;AACA,gBAAIS,KAAKC,WAAT,EAAsB,OAAOD,KAAKC,WAAZ;AACtB;AACA,gBAAIC,SAASC,eAAT,IAA4BD,SAASC,eAAT,CAAyBC,SAAzD,EACI,OAAOF,SAASC,eAAT,CAAyBC,SAAhC;AACJ;AACA,gBAAIF,SAASG,IAAT,CAAcD,SAAlB,EAA6B,OAAOF,SAASG,IAAT,CAAcD,SAArB;AAC7B,mBAAO,CAAP;AACH;;AAED,iBAASX,YAAT,CAAsBnJ,GAAtB,EAA2B;AACvB,gBAAIgK,MAAMJ,SAASK,cAAT,CAAwBjK,GAAxB,CAAV;AACA,gBAAIkK,IAAIF,IAAIG,SAAZ;AACA,gBAAIC,OAAOJ,GAAX;AACA,mBAAOI,KAAKC,YAAL,IAAqBD,KAAKC,YAAL,IAAqBT,SAASG,IAA1D,EAAgE;AAC5DK,uBAAOA,KAAKC,YAAZ;AACAH,qBAAKE,KAAKD,SAAV;AACH,aAAC,OAAOD,CAAP;AACL;AAEJ,KA7CD;AA+CH,CAjDD;;;ACFA5N,QAAQC,MAAR,CAAe,UAAf,EAA2B+N,OAA3B,CAAmC,cAAnC,EAAmD,UAASC,KAAT,EAAgBhN,UAAhB,EAA2B;AAC5E;;AAEA,MAAIwL,UAAU,EAAd;;AAEAA,UAAQR,UAAR,GAAqB,UAAUiC,SAAV,EAAqBlC,QAArB,EAA+B;AAClD,QAAImC,iBAAiBD,UAAUnC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,EAAwBA,KAAxB,CAA8B,GAA9B,CAArB;AACAoC,qBAAiBA,eAAeA,eAAexM,MAAf,GAAwB,CAAvC,CAAjB;;AAEA,QAAIyM,WAAW;AACbC,iBAAWrC,QADE;AAEbsC,iBAAWJ,SAFE;AAGbC,sBAAgBA,cAHH;AAIbI,iBAAWtN,WAAWsF;AAJT,KAAf;;AAOA,WAAO0H,MAAMO,IAAN,CAAW,WAAX,EAAwBJ,QAAxB,CAAP;AACD,GAZD;AAaA,SAAO3B,OAAP;AACD,CAnBD;;;ACAAzM,QAAQC,MAAR,CAAe,UAAf,EAA2BwM,OAA3B,CAAmC,aAAnC,EAAkD,UAASwB,KAAT,EAAe;;AAEhE,KAAIQ,UAAU,wBAAd;;AAEA,MAAK3L,QAAL,GAAgB,EAAhB;;AAEA;;AAEA,MAAKvB,UAAL,GAAkB,YAAU;AAC3B,SAAO0M,MAAM;AACZS,WAAQ,KADI;AAEZnO,QAAKkO,UAAU;AAFH,GAAN,EAGJjN,IAHI,CAGC,UAASC,QAAT,EAAkB;AACzB,UAAOA,SAASyK,IAAhB;AACA,GALM,CAAP;AAMA,EAPD;;AASA,MAAKpK,cAAL,GAAsB,UAASV,EAAT,EAAY;AACjC,SAAO6M,MAAM;AACZS,WAAQ,KADI;AAEZnO,QAAKkO,UAAU,UAAV,GAAuBrN;AAFhB,GAAN,EAGJI,IAHI,CAGC,UAASC,QAAT,EAAkB;AACzB,UAAOA,SAASyK,IAAhB;AACA,GALM,CAAP;AAMA,EAPD;;AASA,MAAKjK,WAAL,GAAmB,UAASb,EAAT,EAAY;AAC9B,SAAO6M,MAAM;AACZS,WAAQ,KADI;AAEZnO,QAAKkO,UAAU,OAAV,GAAoBrN;AAFb,GAAN,EAGJI,IAHI,CAGC,UAASC,QAAT,EAAkB;AACzB,UAAOA,SAASyK,IAAhB;AACA,GALM,CAAP;AAMA,EAPD;;AASA,MAAK/J,gBAAL,GAAwB,UAASf,EAAT,EAAY;AACnC,SAAO6M,MAAM;AACZS,WAAQ,KADI;AAEZnO,QAAKkO,UAAU,YAAV,GAAyBrN;AAFlB,GAAN,EAGJI,IAHI,CAGC,UAASC,QAAT,EAAkB;AACzB,UAAOA,SAASyK,IAAhB;AACA,GALM,CAAP;AAMA,EAPD;;AAUA,MAAKvJ,cAAL,GAAsB,UAASvB,EAAT,EAAY;AACjC,SAAO6M,MAAM;AACZS,WAAQ,KADI;AAEZnO,QAAKkO,UAAU,UAAV,GAAuBrN;AAFhB,GAAN,EAGJI,IAHI,CAGC,UAASC,QAAT,EAAkB;AACzB,UAAOA,SAASyK,IAAhB;AACA,GALM,CAAP;AAMA,EAPD;;AAUA;;AAEA,MAAKxH,SAAL,GAAiB,UAASX,MAAT,EAAgB;AAChC,SAAOkK,MAAM;AACZS,WAAQ,MADI;AAEZnO,QAAKkO,UAAU,WAFH;AAGZvC,SAAMnI;AAHM,GAAN,EAIJvC,IAJI,CAIC,UAASC,QAAT,EAAkB;AACzB,UAAOA,QAAP;AACA,GANM,CAAP;AAOA,EARD;;AAWA;;AAEA,MAAKqD,SAAL,GAAiB,UAAS6J,UAAT,EAAoB;AACpC,SAAOV,MAAM;AACZS,WAAQ,KADI;AAEZnO,QAAKkO,UAAU,WAFH;AAGZvC,SAAMyC;AAHM,GAAN,EAIJnN,IAJI,CAIC,UAASC,QAAT,EAAkB;AACzB,UAAOA,SAASyK,IAAhB;AACA,GANM,CAAP;AAOA,EARD;;AAWA;;AAEA,MAAKhJ,UAAL,GAAkB,UAAS0L,IAAT,EAAc;AAC/B,SAAOX,MAAM;AACZS,WAAQ,KADI;AAEZnO,QAAKkO,UAAU,SAFH;AAGZvC,SAAM0C;AAHM,GAAN,EAIJpN,IAJI,CAIC,UAASC,QAAT,EAAkB;AACzB,UAAOA,SAASyK,IAAhB;AACA,GANM,CAAP;AAOA,EARD;;AAWA;;AAEA,MAAK1I,SAAL,GAAiB,UAASpC,EAAT,EAAY;AAC5B,SAAO6M,MAAM;AACZS,WAAQ,QADI;AAEZnO,QAAKkO,UAAU,YAAV,GAAyBrN;AAFlB,GAAN,EAGJI,IAHI,CAGC,UAASC,QAAT,EAAkB;AACzB,UAAOA,QAAP;AACA,GALM,CAAP;AAMA,EAPD;AASA,CAzGD;;;ACAAzB,QAAQC,MAAR,CAAe,UAAf,EAA2BwM,OAA3B,CAAmC,aAAnC,EAAkD,UAASwB,KAAT,EAAe;;AAE/D,OAAKtH,UAAL,GAAkB,UAASkI,WAAT,EAAqB;AACrC,WAAOZ,MAAM;AACXS,cAAQ,MADG;AAEXnO,WAAK,aAFM;AAGX2L,YAAM2C;AAHK,KAAN,EAKNrN,IALM,CAKD,UAASY,GAAT,EAAc;AAClB;AACA,aAAOA,IAAI8J,IAAX;AACD,KARM,EASNE,KATM,CASA,UAASC,GAAT,EAAc;AACnBvF,cAAQC,GAAR,CAAY,mBAAZ,EAAiCsF,GAAjC;AACD,KAXM,CAAP;AAYD,GAbD;;AAeA,OAAKjG,OAAL,GAAe,YAAW;AACxB,WAAO6H,MAAM;AACXS,cAAQ,KADG;AAEXnO,WAAK;AAFM,KAAN,EAINiB,IAJM,CAID,UAASY,GAAT,EAAc;AAClB;AACA,aAAOA,IAAI8J,IAAX;AACD,KAPM,EAQNE,KARM,CAQA,UAASC,GAAT,EAAc;AACnB;AACD,KAVM,CAAP;AAWD,GAZD;;AAcA,OAAKrF,MAAL,GAAc,YAAW;AACvB,WAAOiH,MAAM;AACXS,cAAQ,KADG;AAEXnO,WAAK;AAFM,KAAN,EAINiB,IAJM,CAID,UAASY,GAAT,EAAc;AAClB;AACA,aAAOA,IAAI8J,IAAX;AACD,KAPM,EAQNE,KARM,CAQA,UAASC,GAAT,EAAc;AACnBvF,cAAQC,GAAR,CAAYsF,GAAZ;AACD,KAVM,CAAP;AAWD,GAZD;AAaD,CA5CD","file":"bundle.js","sourcesContent":["angular.module('merofood', ['ui.router', 'ui.materialize', 'angular-cardflow'])\r\n\t.config(function($stateProvider, $urlRouterProvider, $uiViewScrollProvider){\r\n\r\n\t\t$stateProvider\r\n\r\n\t\t\t.state('home', {\r\n\t\t\t\turl: '/',\r\n\t\t\t\ttemplateUrl: '../views/main.html',\r\n\t\t\t\tcontroller: 'mainCtrl'\r\n\t\t\t})\r\n\r\n\t\t\t.state('all', {\r\n\t\t\t\turl: '/all/:type',\r\n\t\t\t\ttemplateUrl: '../views/list_all.html',\r\n\t\t\t\tcontroller: 'listAllCtrl'\r\n\t\t\t})\r\n\r\n\t\t\t.state('search', {\r\n\t\t\t\turl: '/search',\r\n\t\t\t\ttemplateUrl: '../views/search.html',\r\n\t\t\t\tcontroller: 'searchCtrl'\r\n\t\t\t})\r\n\r\n\t\t\t.state('b', {\r\n\t\t\t\turl: '/b/:id',\r\n\t\t\t\ttemplateUrl: '../views/merofood_default.html',\r\n\t\t\t\tcontroller: 'detailsCtrl'\r\n\t\t\t})\r\n\r\n\t\t\t.state('default', {\r\n\t\t\t\turl: '/default',\r\n\t\t\t\ttemplateUrl: '../views/merofood_default.html'\r\n\t\t\t})\r\n\r\n\t\t\t.state('night', {\r\n\t\t\t\turl: '/night',\r\n\t\t\t\ttemplateUrl: '../views/merofood_night.html'\r\n\t\t\t})\r\n\r\n\t\t\t.state('new-bus', { //Only if a User is logged in\r\n\t\t\t\turl: '/new-bus',\r\n\t\t\t\ttemplateUrl: '../views/new_bus.html',\r\n\t\t\t\tcontroller: 'formsCtrl'\r\n\t\t\t});\r\n\r\n\t\t\t$urlRouterProvider.otherwise('/');\r\n\r\n\t\t\t$uiViewScrollProvider.useAnchorScroll();\r\n\r\n\t});","angular.module('merofood').controller('detailsCtrl', function($scope, mainService, $stateParams, $location, scrollSrv, $rootScope){\r\n\t\r\n\tvar bid = parseInt($stateParams.id);\r\n\t$scope.toFeatId = bid;\r\n\t\r\n\t// GET ALL BUSINESSES\r\n\t$scope.getAllBus = function(){\r\n\t\tmainService.getBusData().then(function(response){\r\n\t\t\t// GET ONE BUSINESS WITH MATCHED ID\r\n\t\t\tfor(var i = 0; i < response.length; i++){\r\n\t\t\t\tif(response[i].id === bid){\r\n\t\t\t\t\t$scope.b1 = response[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t$scope.getAllBus();\r\n\r\n\r\n\t// GET ALL SPECIAL\r\n\t$scope.getSpecial = function(){\r\n\t\tmainService.getSpecialData(bid).then(function(response){\r\n\t\t\t$scope.s1 = response;\r\n\t\t});\r\n\t}\r\n\r\n\t$scope.getSpecial();\r\n\r\n\r\n\t// GET ALL MENU\r\n\t$scope.getMenu = function(){\r\n\t\tmainService.getMenuData(bid).then(function(response){\r\n\t\t\t$scope.m1 = response;\r\n\t\t\tmainService.getMenuItemsData(bid).then(function(res){\r\n\t\t\t\tlet items = res;\r\n\t\t\t\tfor(let i = 0; i < $scope.m1.length; i++){\r\n\t\t\t\t\t$scope.m1[i].items = [];\r\n\t\t\t\t\tfor(let j = 0; j < items.length; j++){\r\n\t\t\t\t\t\tif(items[j].menuid === $scope.m1[i].menu_id){\r\n\t\t\t\t\t\t\t$scope.m1[i].items.push(items[j]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t$scope.getMenu();\r\n\r\n\r\n\t// GET ALL GALLERY\r\n\t$scope.getGallery = function(){\r\n\t\tmainService.getGalleryData(bid).then(function(response){\r\n\t\t\t$scope.g1 = response;\r\n\t\t});\r\n\t}\r\n\r\n\t$scope.getGallery();\r\n\r\n\r\n\t// UPDATE ONE BUSINESS\r\n\t$scope.editBusiness = function(b1){\r\n\t\tmainService.selected = b1;\r\n\t\t$location.path('/new-bus');\r\n\t}\r\n\r\n\t// SHOW SAVE & EXIT BUTTON\r\n\t$scope.edit = function(){\r\n\t\t$rootScope.isEditing = true;\r\n\t}\r\n\r\n\r\n\t// UPDATE FEATURED BUSINESS\r\n\t$scope.featureBus = function(featBus){\r\n\t\tmainService.featureBus(featBus).then(function(response){\r\n\t\t\tif(response[0].featured === 'yes'){\r\n\t\t\t\tMaterialize.toast('Your Business is now Featured!', 2000, 'green');\r\n\t\t\t} \r\n\t\t\tif(response[0].featured === 'no'){\r\n\t\t\t\tMaterialize.toast('Your Business is no longer Featured!', 2000, 'red');\r\n\t\t\t}\r\n\t\t\t$location.path('/');\r\n\t\t});\r\n\t}\r\n\r\n\r\n\t// DELETE ONE BUSINESS\r\n\t$scope.deleteBusiness = function(id){\r\n\t\tmainService.deleteBus(id).then(function(response){\r\n\t\t\t$location.path('/');\r\n\t\t});\r\n\t}\r\n    \r\n\t//SCROLL SPY\r\n  $scope.gotoElement = function (eID){\r\n  \t$location.hash(eID);\r\n  \tscrollSrv.scrollTo(eID); \r\n  };\r\n\r\n});","angular.module('merofood').controller('formsCtrl', function($scope, mainService, $location, $rootScope){\r\n\r\n\t$scope.images = [];\r\n\t$scope.newGallery = [];\r\n\t$scope.newBus = mainService.selected;\r\n\r\n\t$scope.addBus = function(newBus){\r\n\t\t// console.log('addBus fn fired!!!');\r\n\t\tnewBus.bus_logo = $scope.images[0];\r\n\t\tnewBus.spimg1 = $scope.images[1];\r\n\t\tnewBus.spimg2 = $scope.images[2];\r\n\t\tnewBus.bus_cover_img = $scope.images[3];\r\n\t\tnewBus.spbg1 = $scope.images[4];\r\n\t\tnewBus.spbg2 = $scope.images[5];\r\n\r\n\t\tfor (let i = 6; i < $scope.images.length; i++) {\r\n\t\t\t$scope.newGallery.push($scope.images[i]);\r\n\t\t}\r\n\r\n\t\tnewBus.gallery = $scope.newGallery;\t\t\r\n\t\tnewBus.user_id = $rootScope.currentUserId;\r\n\r\n\t\tmainService.addNewBus(newBus).then(function(response){\r\n\t\t\t$scope.business = response;\r\n\t\t});\r\n\t}\r\n\r\n\r\n\t// UPDATE BUSINESS\r\n\r\n\t$scope.updateBusiness = function(update){\r\n\t\tmainService.updateBus(update).then(function(response){\r\n\t\t\t$scope.resFromDb = response;\r\n\t\t\t// $location.path('/');\r\n\t\t});\r\n\t}\r\n\r\n});","angular.module('merofood').controller('listAllCtrl', function($scope, $stateParams, $rootScope){\r\n\r\n\tvar stateType = $stateParams.type;\r\n\r\n\t$scope.typeTitle = stateType;\r\n\t$scope.busType = [];\r\n\r\n\tif(stateType === 'Featured'){\r\n\t\t$scope.busType = $rootScope.featured;\r\n\t}\r\n\tif(stateType === 'Restaurants'){\r\n\t\t$scope.busType = $rootScope.restaurants;\r\n\t}\r\n\tif(stateType === 'Coffee-Cafe'){\r\n\t\t$scope.busType = $rootScope.coffeeCafe;\r\n\t}\r\n\tif(stateType === 'Bars'){\r\n\t\t$scope.busType = $rootScope.bars;\r\n\t}\r\n\tif(stateType === 'Bakery'){\r\n\t\t$scope.busType = $rootScope.bakeries;\r\n\t}\r\n\tif(stateType === 'Dessert'){\r\n\t\t$scope.busType = $rootScope.desserts;\r\n\t}\r\n\tif(stateType === 'Food-Trucks-Take-Outs'){\r\n\t\t$scope.busType = $rootScope.takeouts;\r\n\t}\r\n\r\n\r\n});","angular.module('merofood').controller('mainCtrl', function($scope, mainService, $rootScope){\r\n\r\n\t$scope.dataFromServer = false;\r\n\r\n\t$rootScope.featured = [];\r\n\t$rootScope.restaurants = [];\r\n\t$rootScope.coffeeCafe = [];\r\n\t$rootScope.bars = [];\r\n\t$rootScope.bakeries = [];\r\n\t$rootScope.desserts = [];\r\n\t$rootScope.takeouts = [];\r\n\r\n\t$scope.getBusiness = function(){\r\n\t\tmainService.getBusData().then(function(response){\r\n\t\t\t// console.log(response);\r\n\t\t\t$rootScope.searchAllBus = response;\r\n\r\n\t\t\tfor (let i = 0; i < response.length; i++){\r\n\t\t\t\tif(response[i].featured === 'yes'){\r\n\t\t\t\t\t$rootScope.featured.push(response[i]);\r\n\t\t\t\t};\r\n\t\t\t};\r\n\r\n\t\t\tfor(let j = 0; j < response.length; j++){\r\n\t\t\t\tif(response[j].bus_type === 'Restaurant'){\r\n\t\t\t\t\t$rootScope.restaurants.push(response[j]);\r\n\t\t\t\t}\r\n\t\t\t\tif(response[j].bus_type === 'Coffee / Cafe'){\r\n\t\t\t\t\t$rootScope.coffeeCafe.push(response[j]);\r\n\t\t\t\t}\r\n\t\t\t\tif(response[j].bus_type === 'Bar'){\r\n\t\t\t\t\t$rootScope.bars.push(response[j]);\r\n\t\t\t\t}\r\n\t\t\t\tif(response[j].bus_type === 'Bakery'){\r\n\t\t\t\t\t$rootScope.bakeries.push(response[j]);\r\n\t\t\t\t}\r\n\t\t\t\tif(response[j].bus_type === 'Dessert'){\r\n\t\t\t\t\t$rootScope.desserts.push(response[j]);\r\n\t\t\t\t}\r\n\t\t\t\tif(response[j].bus_type === 'Food Trucks / Take Outs'){\r\n\t\t\t\t\t$rootScope.takeouts.push(response[j]);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t$scope.dataFromServer = true;\r\n\t\t});\r\n\t}\r\n\r\n\t$scope.getBusiness();\r\n\r\n\t$scope.searchBusiness = function(searchKey){\r\n\t\t$rootScope.searchKeyMain = searchKey;\r\n\t}\r\n\r\n});","angular.module('merofood').controller('searchCtrl', function($scope, $rootScope){\r\n\r\n\t$scope.allBusForSearch = $rootScope.searchAllBus;\r\n\t\r\n});","angular.module('merofood').controller('userCtrl', function($scope, userService, $state, $rootScope, $location){\r\n\r\n  function getUser() {\r\n    userService.getUser().then(function(user) {\r\n      if(user){\r\n        $scope.user = user.first_name;\r\n        $rootScope.currentUserId = user.id;\r\n        $rootScope.currentUserEmail = user.email;\r\n        $rootScope.isLoggedIn = true;\r\n      } else {\r\n        $scope.user = 'Sign In';\r\n        $rootScope.isLoggedIn = false;\r\n      }  \r\n    });\r\n  }\r\n\r\n  getUser();\r\n\r\n  $rootScope.isSignedIn = function(){\r\n    if($rootScope.isLoggedIn){\r\n      $location.path('new-bus');\r\n    } else {\r\n      Materialize.toast('Please Sign In First.', 2000, 'red');\r\n    }\r\n  }\r\n\r\n  $scope.loginLocal = function(username, password) {\r\n    console.log('Logging in with', username, password);\r\n    userService.loginLocal({\r\n      username: username,\r\n      password: password\r\n    })\r\n    .then(function(res) {\r\n      getUser();\r\n    })\r\n  }\r\n\r\n  $scope.logout = userService.logout;\r\n\r\n});\r\n","'use strict';\r\n\r\n(function(){\r\n    // set prefixed matrix transform without changing other elements of matrix\r\n    // I tried out matrix3d, but it had visual artifacts in chrome\r\n    var setTransform = function(element, matrix){\r\n        var transform;\r\n        var t = window.getComputedStyle(element);\r\n        var prefix;\r\n        if (t){\r\n            angular.forEach(['moz','o','webkit'], function(p){\r\n                if (t[p + 'Transform']){\r\n                    transform = t[p + 'Transform'];\r\n                    prefix=p;\r\n                }\r\n            });\r\n\r\n            if (transform){\r\n                var m = transform.match(/\\d+/g);\r\n                if (m && m.length == 6){\r\n                    m = m.map(function(e){ return Number(e); });\r\n                }else{\r\n                    m = [1,0,0,1,0,0];\r\n                }\r\n            }else{\r\n                 m = [1,0,0,1,0,0];\r\n            }\r\n\r\n            for(var i=0; i<6;i++){\r\n                if (matrix[i] !== undefined){\r\n                    m[i] = matrix[i];\r\n                }\r\n            }\r\n            var css= {};\r\n            if (!prefix){\r\n                css['transform'] = 'matrix(' + m.join(',') + ')';\r\n            }else{\r\n                css[prefix + 'Transform']='matrix(' + m.join(',') + ')';\r\n            }\r\n            angular.element(element).css(css);\r\n        }\r\n    }\r\n\r\n    var module = angular.module('angular-cardflow', ['ngTouch']);\r\n\r\n    module.directive('cardflow', ['$swipe', '$timeout', function($swipe, $timeout) {\r\n        return {\r\n            'restrict': 'E',\r\n            'template': '<div class=\"cardflow-wrapper\" ng-swipe-left=\"swipeLeft($event)\" ng-swipe-right=\"swipeRight($event)\"><div class=\"cardflow-container\" ng-transclude></div></div>',\r\n            'transclude': true,\r\n            'scope': { 'model' : '=?', 'mode':'=?', 'current':'=?' },\r\n            link: function(scope, element, attrs){\r\n                // next available tick, so element is populated with transcluded content\r\n                $timeout(function(){\r\n                    scope.model = scope.model || {};\r\n                    scope.model.cardWidth = 0;\r\n                    scope.model.wrapperEl=angular.element(element.find('div')[0]);\r\n                    scope.model.containerEl=angular.element(scope.model.wrapperEl.find('div')[0]);\r\n                    scope.model.current = scope.current || scope.model.current || 0;\r\n                    scope.model.cards = scope.model.cards || [];\r\n                    scope.mode = attrs.mode || 'swipeSnapKinetic';\r\n                    scope.model.increment=1;\r\n\r\n                    // wrapper for just setting X-transform of scope.model.containerEl[0]\r\n                    function setPositionX(position){\r\n                        setTransform(scope.model.containerEl[0], [undefined, undefined, undefined, undefined, position, undefined]);\r\n                    }\r\n\r\n                    scope.model.setPositionX = setPositionX;\r\n\r\n                    // track cards list, but use scope.model.cardEls just in case no model was set\r\n                    scope.$watch(function (){ return scope.model.cards; }, function(){\r\n                        scope.model.cardEls = scope.model.containerEl.children();\r\n                        if (scope.model.cardEls && scope.model.cardEls[1]){\r\n                            scope.model.cardWidth = scope.model.cardEls[1].offsetLeft-scope.model.cardEls[0].offsetLeft;\r\n\r\n                            if (scope.model.cardWidth === 0){\r\n                                scope.model.cardWidth = scope.model.cardEls[0].offsetWidth;\r\n                            }\r\n\r\n                            var totalWidth = (scope.model.cardWidth*scope.model.cardEls.length) + scope.model.cardEls[1].offsetLeft;\r\n                            //set container to wide enough to keep  from wrapping\r\n                            scope.model.containerEl.css({'width': totalWidth + 'px'});\r\n\r\n                            scope.model.pageSize = Math.floor(scope.model.wrapperEl[0].clientWidth / scope.model.cardWidth);\r\n                            scope.model.increment = (scope.mode == 'swipeSnapOne') ? 1 : scope.model.pageSize;\r\n                        }\r\n                    });                    \r\n\r\n                    if ( scope.mode != 'swipe'){\r\n                        scope.$watch(function (){ return scope.model.current; }, function(){\r\n                            if (scope.model.cardEls){\r\n                                scope.model.cardEls.removeClass('cardflow-active');\r\n                                var current = angular.element(scope.model.cardEls[scope.model.current]);\r\n                                current.addClass('cardflow-active');\r\n                                if (scope.model.cardWidth){\r\n                                    setPositionX((scope.model.cardWidth * -scope.model.current));\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    if (scope.mode == 'swipeSnapOne' || scope.mode == 'swipeSnapPage'){\r\n                        scope.swipeLeft = function(){\r\n                            var current = scope.model.current+scope.model.increment;\r\n                            if (current < scope.model.cardEls.length){\r\n                                scope.model.current = current;\r\n                            }\r\n                        };\r\n                        scope.swipeRight = function(){\r\n                            var current = scope.model.current-scope.model.increment;\r\n                            if (current >= 0){\r\n                                scope.model.current = current;\r\n                            }\r\n                        };\r\n                    }\r\n\r\n                    if (scope.mode == 'swipeSnap' || scope.mode == 'swipeSnapKinetic' ||  scope.mode == 'swipe'){\r\n\r\n                        // store transition\r\n                        var transition={};\r\n                        var t = window.getComputedStyle(scope.model.containerEl[0])['transition'];\r\n                        if (t){\r\n                            transition.transition = t + '';\r\n                        }\r\n                        angular.forEach(['moz','o','webkit','ms'], function(p){\r\n                            t = window.getComputedStyle(scope.model.containerEl[0])[p+'Transition'];\r\n                            if (t){\r\n                                transition[p+'Transition'] = t;\r\n                            }\r\n                        });\r\n\r\n                        var offset = 0, position=0, velocity=0, timestamp;\r\n\r\n                        $swipe.bind(scope.model.wrapperEl, {\r\n                            start: function(coords){\r\n                                scope.model.cardEls.removeClass('cardflow-active');\r\n                                offset = (scope.mode == 'swipe') ? coords.x-position : coords.x;\r\n                                \r\n                                // remove transition\r\n                                angular.forEach(['moz','o','webkit','ms'], function(p){\r\n                                    scope.model.containerEl.css(p+'Transition', 'none');\r\n                                });\r\n                                scope.model.containerEl.css({'transition':'none'});\r\n\r\n                                if (scope.mode == 'swipeSnapKinetic'){\r\n                                    velocity = 0;\r\n                                    timestamp = Date.now();\r\n                                }\r\n                            },\r\n                            end: function(coords){\r\n                                // restore transition\r\n                                scope.model.containerEl.css(transition);\r\n                                \r\n                                if ( scope.mode != 'swipe'){\r\n                                    // figure out current card from position\r\n                                    var current = Math.floor((position/-scope.model.cardWidth) + 0.5);\r\n\r\n                                    if (scope.mode == 'swipeSnapKinetic'){\r\n                                        //  calculate velocity here\r\n                                        var now = Date.now();\r\n                                        var elapsed = now-timestamp;\r\n                                        var distance = offset-coords.x;\r\n                                        var velocity = distance/elapsed;\r\n\r\n                                        if (Math.abs(velocity) > 1){\r\n                                            current = Math.floor(current + velocity);\r\n                                        }\r\n\r\n                                    }\r\n\r\n                                    if (current >=0){\r\n                                        if (current > (scope.model.cardEls.length-1)){\r\n                                            current = scope.model.cardEls.length-1;\r\n                                        }\r\n                                    }else{\r\n                                        current = 0;\r\n                                    }\r\n                                    \r\n                                    // trigger update\r\n                                    if (scope.model.current==current){\r\n                                        scope.model.current=-1;\r\n                                        scope.$apply();\r\n                                    }\r\n                                    scope.model.current=current;\r\n                                    scope.$apply();\r\n                                }\r\n                            },\r\n                            move: function(coords){\r\n                                // move cards to current position\r\n                                if (scope.mode != 'swipe'){\r\n                                    position = coords.x - (scope.model.current*scope.model.cardWidth) - offset;\r\n                                }else{\r\n                                    position = coords.x - offset;\r\n                                }\r\n\r\n                                setPositionX(position);\r\n                            },\r\n                        });\r\n                    }\r\n\r\n                });\r\n            }\r\n        };\r\n    }]);\r\n    \r\n\r\n})();\r\n\r\n","angular.module('merofood').directive('fileread', function (imageService) {\r\n  return {\r\n    restrict: 'A',\r\n    link: function (scope, elem, attrs) {\r\n      elem.bind(\"change\", function (changeEvent) {\r\n        var reader = new FileReader();\r\n\r\n        reader.onloadend = function (loadEvent) {\r\n          // debugger;\r\n          var fileread = loadEvent.target.result;\r\n          // console.warn(fileread);\r\n\r\n          // console.log('elem: ', elem);\r\n          var tempArray = elem[0].value.split('\\\\');\r\n          var fileName = tempArray[tempArray.length - 1];\r\n\r\n          imageService.storeImage(fileread, fileName)\r\n          .then(function (result) {\r\n            // console.log(result.data.Location);\r\n            scope.images.push(result.data.Location);\r\n            // console.log('fileread: ', scope.images);\r\n          })\r\n          .catch(function (err) {\r\n            console.error(err);\r\n          });\r\n        }\r\n\r\n        reader.readAsDataURL(changeEvent.target.files[0]);\r\n      });\r\n    }\r\n  }\r\n});\r\n  ","angular.module('merofood').directive('footerDir', function(){\r\n\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\ttemplateUrl: '../../views/footer.html'\r\n\t}\r\n\r\n});","angular.module('merofood').directive('headerDir', function(){\r\n\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\ttemplateUrl: '../../views/header.html',\r\n\t\tcontroller: 'userCtrl'\r\n\t}\r\n\t\r\n});","var $scope, $location;\r\n\r\nangular.module('merofood').service('scrollSrv', function(){\r\n    \r\n    this.scrollTo = function(eID) {\r\n        \r\n        var startY = currentYPosition();\r\n        var stopY = elmYPosition(eID);\r\n        var distance = stopY > startY ? stopY - startY : startY - stopY;\r\n        if (distance < 100) {\r\n            scrollTo(0, stopY); return;\r\n        }\r\n        var speed = Math.round(distance / 100);\r\n        if (speed >= 20) speed = 20;\r\n        var step = Math.round(distance / 25);\r\n        var leapY = stopY > startY ? startY + step : startY - step;\r\n        var timer = 0;\r\n        if (stopY > startY) {\r\n            for ( var i=startY; i<stopY; i+=step ) {\r\n                setTimeout(\"window.scrollTo(0, \"+leapY+\")\", timer * speed);\r\n                leapY += step; if (leapY > stopY) leapY = stopY; timer++;\r\n            } return;\r\n        }\r\n        for ( var i=startY; i>stopY; i-=step ) {\r\n            setTimeout(\"window.scrollTo(0, \"+leapY+\")\", timer * speed);\r\n            leapY -= step; if (leapY < stopY) leapY = stopY; timer++;\r\n        }\r\n        \r\n        function currentYPosition() {\r\n            // Firefox, Chrome, Opera, Safari\r\n            if (self.pageYOffset) return self.pageYOffset;\r\n            // Internet Explorer 6 - standards mode\r\n            if (document.documentElement && document.documentElement.scrollTop)\r\n                return document.documentElement.scrollTop;\r\n            // Internet Explorer 6, 7 and 8\r\n            if (document.body.scrollTop) return document.body.scrollTop;\r\n            return 0;\r\n        }\r\n        \r\n        function elmYPosition(eID) {\r\n            var elm = document.getElementById(eID);\r\n            var y = elm.offsetTop;\r\n            var node = elm;\r\n            while (node.offsetParent && node.offsetParent != document.body) {\r\n                node = node.offsetParent;\r\n                y += node.offsetTop;\r\n            } return y;\r\n        }\r\n\r\n    };\r\n    \r\n});\r\n               ","angular.module('merofood').factory('imageService', function($http, $rootScope){\r\n  // AMAZON S3\r\n\r\n  var service = {};\r\n\r\n  service.storeImage = function (imageData, fileName) {\r\n    var imageExtension = imageData.split(';')[0].split('/');\r\n    imageExtension = imageExtension[imageExtension.length - 1];\r\n\r\n    var newImage = {\r\n      imageName: fileName,\r\n      imageBody: imageData,\r\n      imageExtension: imageExtension,\r\n      userEmail: $rootScope.currentUserEmail\r\n    }\r\n\r\n    return $http.post('/newimage', newImage);\r\n  }\r\n  return service;\r\n});\r\n","angular.module('merofood').service('mainService', function($http){\r\n\r\n\tvar baseUrl = 'http://localhost:3000/';\r\n\r\n\tthis.selected = {};\r\n\r\n\t// GET ROUTES\r\n\t\r\n\tthis.getBusData = function(){\r\n\t\treturn $http({\r\n\t\t\tmethod: 'GET',\r\n\t\t\turl: baseUrl + 'businesses'\r\n\t\t}).then(function(response){\r\n\t\t\treturn response.data;\r\n\t\t});\r\n\t}\r\n\r\n\tthis.getSpecialData = function(id){\r\n\t\treturn $http({\r\n\t\t\tmethod: 'GET',\r\n\t\t\turl: baseUrl + 'special/' + id\r\n\t\t}).then(function(response){\r\n\t\t\treturn response.data;\r\n\t\t});\r\n\t}\r\n\r\n\tthis.getMenuData = function(id){\r\n\t\treturn $http({\r\n\t\t\tmethod: 'GET',\r\n\t\t\turl: baseUrl + 'menu/' + id\r\n\t\t}).then(function(response){\r\n\t\t\treturn response.data;\r\n\t\t});\r\n\t}\r\n\r\n\tthis.getMenuItemsData = function(id){\r\n\t\treturn $http({\r\n\t\t\tmethod: 'GET',\r\n\t\t\turl: baseUrl + 'menuitems/' + id\r\n\t\t}).then(function(response){\r\n\t\t\treturn response.data;\r\n\t\t});\r\n\t}\r\n\r\n\r\n\tthis.getGalleryData = function(id){\r\n\t\treturn $http({\r\n\t\t\tmethod: 'GET',\r\n\t\t\turl: baseUrl + 'gallery/' + id\r\n\t\t}).then(function(response){\r\n\t\t\treturn response.data;\r\n\t\t});\r\n\t}\r\n\r\n\r\n\t// POST ROUTE\r\n\r\n\tthis.addNewBus = function(newBus){\r\n\t\treturn $http({\r\n\t\t\tmethod: 'POST',\r\n\t\t\turl: baseUrl + 'createbus',\r\n\t\t\tdata: newBus\r\n\t\t}).then(function(response){\r\n\t\t\treturn response;\r\n\t\t});\r\n\t}\r\n\r\n\r\n\t// PUT ROUTE -- UPDATE\r\n\r\n\tthis.updateBus = function(updatedBus){\r\n\t\treturn $http({\r\n\t\t\tmethod: 'PUT',\r\n\t\t\turl: baseUrl + 'updatebus',\r\n\t\t\tdata: updatedBus\r\n\t\t}).then(function(response){\r\n\t\t\treturn response.data;\r\n\t\t});\r\n\t}\r\n\r\n\r\n\t// FEATURE BUSINESS\r\n\r\n\tthis.featureBus = function(feat){\r\n\t\treturn $http({\r\n\t\t\tmethod: 'PUT',\r\n\t\t\turl: baseUrl + 'featbus',\r\n\t\t\tdata: feat\r\n\t\t}).then(function(response){\r\n\t\t\treturn response.data;\r\n\t\t});\r\n\t}\r\n\r\n\r\n\t// DELETE ROUTE\r\n\r\n\tthis.deleteBus = function(id){\r\n\t\treturn $http({\r\n\t\t\tmethod: 'DELETE',\r\n\t\t\turl: baseUrl + 'deletebus/' + id,\r\n\t\t}).then(function(response){\r\n\t\t\treturn response;\r\n\t\t});\r\n\t}\r\n\r\n});\r\n","angular.module('merofood').service('userService', function($http){\r\n\r\n  this.loginLocal = function(credentials){\r\n    return $http({\r\n      method: \"POST\",\r\n      url: '/auth/local',\r\n      data: credentials\r\n    })\r\n    .then(function(res) {\r\n      // console.log(res);\r\n      return res.data;\r\n    })\r\n    .catch(function(err) {\r\n      console.log('ERROR LOGGING IN!', err);\r\n    })\r\n  }\r\n\r\n  this.getUser = function() {\r\n    return $http({\r\n      method: 'GET',\r\n      url: '/auth/me'\r\n    })\r\n    .then(function(res) {\r\n      // console.log(res)\r\n      return res.data;\r\n    })\r\n    .catch(function(err) {\r\n      // console.log(err);\r\n    })\r\n  }\r\n\r\n  this.logout = function() {\r\n    return $http({\r\n      method: 'GET',\r\n      url: '/auth/logout'\r\n    })\r\n    .then(function(res) {\r\n      // console.log(res.data)\r\n      return res.data;\r\n    })\r\n    .catch(function(err) {\r\n      console.log(err);\r\n    })\r\n  }\r\n})\r\n"]}